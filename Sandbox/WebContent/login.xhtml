<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html 
	xmlns="http://www.w3.org/1999/xhtml"  
	xmlns:ui="http://java.sun.com/jsf/facelets"
   	xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:p="http://primefaces.org/ui"> 
  
    <h:head>    
    	<h:outputStylesheet library="css" name="style.css"  />    
    </h:head>  
          
    <h:body>
        <div class="div-center-xx-large">Welcome to Sandbox!</div>
        â€‹<hr />
        
        <h:form id="loginForm">
                
	        <div class="div-center-large">
	        	User: <p:inputText id="username" value="#{loginController.userBean.username}" />            
	        	Password: <p:password id="password" value="#{loginController.userBean.password}" />
	        	
	        	<h:outputText value="&#160;" />	        	
	        	<p:commandButton action="#{loginController.loginAccess}" id="iconOnly" icon="ui-icon-circle-arrow-e" ajax="false" />
	        	
	        	<h:outputText value="&#160;" />
	        	<h:outputLink onclick="PF('accountDialog').show(); return false;">Want an account?</h:outputLink>
	        	
	        </div>
	        
	        <p:growl id="growl" sticky="false" showDetail="true" life="2000" />
	        
	        <p:dialog header="Account Registration" widgetVar="accountDialog" resizable="false" modal="false" dynamic="true" position="500, 150" >
	        	
	        	<!-- ui:include src="/faces/includes/accountRegistration.xhtml"/ -->
	        	
	        	<h:panelGrid columns="2" cellpadding="5">
        	
	        		<h:outputLabel for="acctUsername" value="Username" />
	            	<p:inputText id="acctUsername" value="#{loginController.accountRegistrationBean.username}" required="true" label="Username" />
	            	
	            	<h:outputLabel for="acctpassword" value="Password" />
	            	<p:password id="acctpassword" value="#{loginController.accountRegistrationBean.password}" required="true" label="Password" />
	        	
	            	<h:outputLabel for="acctFirstname" value="First Name" />
	            	<p:inputText id="acctFirstname" value="#{loginController.accountRegistrationBean.firstName}" required="true" label="First Name" />
	 
	            	<h:outputLabel for="acctLastname" value="Last Name" />
	            	<p:inputText id="acctLastname" value="#{loginController.accountRegistrationBean.lastName}" required="true" label="Last Name" />
	            	
	            	<h:outputLabel for="acctEmail" value="Email" />
	            	<p:inputText id="acctEmail" value="#{loginController.accountRegistrationBean.email}" required="true" label="Email" />
	             	
	             	<f:facet name="footer">
		                <p:commandButton value="Create Account!" update="growl" actionListener="#{loginController.registerAccount}" 
		                	oncomplete="handleLoginRequest(xhr, status, args)" />
	            	</f:facet> 
             	  
        		</h:panelGrid>
	        	
			</p:dialog>
	        	        	                
        </h:form>
        
        <script type="text/javascript">
	    	function handleLoginRequest(xhr, status, args) {
	        	if(args.validationFailed || !args.registrationFlag) {
	            	PF('accountDialog').jq.effect("shake", {times:5}, 100);
	        	
	        	} else {
	            	PF('accountDialog').hide();
	        	}
	   	 	}
		</script>  
    </h:body>  
</html>  